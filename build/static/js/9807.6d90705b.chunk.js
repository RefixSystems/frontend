"use strict";(self.webpackChunklaptop_rental_web_app=self.webpackChunklaptop_rental_web_app||[]).push([[9807],{98954:(e,s,a)=>{a.d(s,{A:()=>f});var r=a(65043),t=a(71094),n=a(53519),l=a(61072),o=a(64196),d=a(78602),c=a(14282),i=a(49804),u=a(60184),m=a(3825),x=a(92157),h=a.n(x),p=a(13441),g=(a(39585),a(36653)),j=a(70579);const f=e=>{const{color:s}=(0,g.D)(),a=(0,r.useMemo)((()=>e.COLUMNS),[e.COLUMNS]),x=(0,r.useMemo)((()=>e.MOCK_DATA||[]),[e.MOCK_DATA]),{getTableProps:f,getTableBodyProps:v,headerGroups:A,prepareRow:C,page:N}=(0,t.useTable)({columns:a,data:x,autoResetWidth:!1},t.useGlobalFilter,t.useSortBy,t.usePagination);return(0,j.jsx)("div",{children:(0,j.jsx)(n.A,{fluid:!0,className:"ml-xxl-n4 ml-xl-n4 ml-lg-n4",children:(0,j.jsxs)(l.A,{children:[(0,j.jsxs)(o.A,{className:"justify-content-center align-items-center",striped:!0,hover:!0,...f(),responsive:!0,style:{width:"100%",marginLeft:"25px"},children:[(0,j.jsx)("thead",{children:A.map(((e,s)=>(0,r.createElement)("tr",{...e.getHeaderGroupProps(),key:s},e.headers.map(((e,s)=>(0,r.createElement)("th",{...e.getHeaderProps(),key:s,className:"text-center text-dark",style:{width:"".concat(e.width,"px"),whiteSpace:"nowrap",justifyContent:"center",alignItems:"center"},onClick:s=>{s.target.classList.contains("fa-sort")||"ACTIONS"===e.render("Header")||e.toggleSortBy(!e.isSortedDesc)}},"ACTIONS"===e.render("Header")?(0,j.jsx)(j.Fragment,{children:e.render("Header")}):(0,j.jsxs)("div",{children:[e.render("Header"),(0,j.jsx)(u.MjW,{className:"mx-2"})]})))))))}),(0,j.jsx)("tbody",{...v(),children:N.length>0?N.map(((s,a)=>(C(s),(0,r.createElement)("tr",{...s.getRowProps(),key:a},s.cells.map(((s,t)=>{const n="action"===s.column.id||"localShop"===s.column.id||"serviceCenter"===s.column.id||"ourServices"===s.column.id||"addInCarousel"===s.column.id;return(0,r.createElement)("td",{...s.getCellProps(),key:t,className:"text-secondary text-start",style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"20ch",backgroundColor:a<=e.count-1?"#cfd1d1":""}},n||s.value?s.render("Cell"):"-")})))))):(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:a.length,className:"text-center text-dark",children:"No Data Found"})})})]}),(0,j.jsxs)(d.A,{className:"".concat(N.length>0?"d-flex":"d-none"," flex-row justify-content-center align-items-center"),children:[(0,j.jsx)(d.A,{className:"d-flex justify-content-start align-items-center flex-wrap",children:(0,j.jsxs)("span",{className:"m-1",children:["Showing","",(0,j.jsxs)("strong",{className:"m-2",children:[e.startIndex," to ",e.endIndex," of"," ",(0,j.jsxs)("strong",{className:"m-2",children:[" ",e.totalItems," entries"]})]})]})}),(0,j.jsx)(d.A,{className:" mt-3 d-none d-sm-none d-md-none d-xxl-flex d-xl-flex d-lg-flex justify-content-end align-items-center",children:(0,j.jsx)(h(),{breakLabel:"...",onPageChange:s=>e.setCurrentPage(s.selected+1),pageRangeDisplayed:5,pageCount:e.totalPages,renderOnZeroPageCount:null,activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",containerClassName:"pagination",previousLabel:(0,j.jsx)(p.Vx.Provider,{value:{color:s,size:"28px"},children:(0,j.jsx)(m.dnY,{})}),nextLabel:(0,j.jsx)(p.Vx.Provider,{value:{color:s,size:"28px"},children:(0,j.jsx)(m.m2f,{})})})}),(0,j.jsxs)(d.A,{className:"d-flex d-sm-flex d-md-flex d-xxl-none d-xl-none d-lg-none justify-content-end align-items-center",children:[(0,j.jsx)(c.A,{style:{backgroundColor:s,border:"none"},onClick:()=>e.setCurrentPage(e.currentPage-1),disabled:1===e.currentPage,className:"m-2",children:(0,j.jsx)(i.o_z,{size:14})}),(0,j.jsx)(c.A,{style:{backgroundColor:s,border:"none"},onClick:()=>{e.setCurrentPage(e.currentPage+1)},disabled:e.currentPage===e.totalPages,children:(0,j.jsx)(i.hdn,{size:14})})]})]})]})})})}},69807:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var r=a(65043),t=a(14282),n=a(53519),l=a(61072),o=a(78602),d=a(27417),c=a(25284),i=a(24522),u=a(98954),m=a(65797),x=a(31462),h=a(63401),p=a(60184),g=a(36017),j=a(73216),f=a(35475),v=a(70579);const A=e=>{let{requestId:s,type:a}=e;const r=(0,j.Zp)();return(0,v.jsx)("span",{onClick:()=>{const e=encodeURIComponent(s);"Rental"===a?r("/admin/rentalOrder-details/".concat(e)):"Repair"===a?r("/admin/repairOrder-details/".concat(e)):"Refurbished"===a&&r("/admin/refurbishedOrder-details/".concat(e))},style:{cursor:"pointer",color:"blue",textDecoration:"underline"},children:s})};var C=a(32479),N=a(39110),b=a(2519),y=a(36653),S=a(31121),P=a(50423),O=a(85959),T=a(33056);const w=()=>{const{color:e}=(0,y.D)(),[s,a]=(0,r.useState)([]),[w,I]=(0,r.useState)(1),[k,H]=(0,r.useState)(1),[E,R]=(0,r.useState)(1),[L,D]=(0,r.useState)(1),[_,F]=(0,r.useState)(0),[M,q]=(0,r.useState)(""),[B,G]=(0,r.useState)(""),[z,K]=(0,r.useState)(!1),{id:U}=(0,j.g)(),W=(0,j.Zp)(),[V,Y]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)(""),[J,X]=(0,r.useState)("All"),[$,ee]=(0,r.useState)(!1),[se,ae]=(0,r.useState)(""),[re,te]=(0,r.useState)(!1),[ne,le]=(0,r.useState)(""),[oe,de]=(0,r.useState)(new Array(4).fill("")),[ce,ie]=(0,r.useState)(""),[ue,me]=(0,r.useState)(""),[xe,he]=(0,r.useState)(!1),[pe,ge]=(0,r.useState)(!1),[je,fe]=(0,r.useState)(!1),[ve,Ae]=(0,r.useState)(!1),[Ce,Ne]=(0,r.useState)(""),[be,ye]=(0,r.useState)(""),[Se,Pe]=(0,r.useState)(""),[Oe,Te]=(0,r.useState)(120),[we,Ie]=(0,r.useState)(!1),[ke,He]=(0,r.useState)(!1),[Ee,Re]=(0,r.useState)(0),Le=(0,r.useRef)([]),De=(0,r.useRef)(null),_e=(0,C.L)(),Fe=(0,T.O)(),Me=e=>(0,S.GP)(new Date(e),"dd-MMM-yyyy h:mm a"),{data:qe,isLoading:Be,isError:Ge,error:ze,refetch:Ke}=(0,m.XE)({page:w,search:M,id:U,assigned:"All"===J?"":J,role:_e,startDate:Ce,endDate:be,dayFilter:Se,phoneNumber:Fe}),[Ue]=(0,m.NK)(),[We]=(0,m.Wj)(),[Ve]=(0,m.AQ)();(0,r.useEffect)((()=>{qe&&qe.data&&(a(qe.data),H(qe.pagination.startIndex),I(w),F(qe.pagination.totalItems),R(qe.pagination.endIndex),D(qe.pagination.totalPages),ge(qe.moduleAccess.write),fe(qe.moduleAccess.read),Ae(qe.moduleAccess.fullAccess),Re(qe.orderCount)),Ge&&500===(null===ze||void 0===ze?void 0:ze.status)?He(!0):He(!1)}),[qe,w,_e,ze,Ge]),(0,r.useEffect)((()=>{var e;$&&(null===(e=Le.current[0])||void 0===e||e.focus())}),[$]),(0,r.useEffect)((()=>(re&&Ye(),()=>{De.current&&clearInterval(De.current)})),[re]);const Ye=()=>{Te(120),Ie(!1);const e=setInterval((()=>{Te((s=>s<=1?(clearInterval(e),Ie(!0),0):s-1))}),1e3)},Ze=()=>{K(!0),q(B),Ke({page:w,search:B}).then((()=>{K(!1)}))},Qe=()=>{ee(!1)},Je=()=>{te(!1),de(new Array(4).fill(""))},Xe=[{Header:"ID",accessor:"s_no"},{Header:"User Name",accessor:"userName"},{Header:"Phone Number",accessor:"phoneNumber"},{Header:"Alternate PhoneNumber",accessor:"alternatePhoneNumber"},{Header:"Email",accessor:"email"},{Header:"Address",accessor:"address"},{Header:"Request Id",accessor:"requestId",Cell:e=>{let{row:s}=e;const{requestId:a,type:r}=s.original;return(0,v.jsx)(A,{requestId:a,type:r})}},{Header:"Type",accessor:"type"},{Header:"Status",accessor:"status"},{Header:"Notes",accessor:"notes"},{Header:"Bill Generated",accessor:"billGenerated"},{Header:"Initial Amount",accessor:"amount"},{Header:" Initial Amount Paid Through",accessor:"initialAmountPaidThrough"},{Header:"Assigned On",accessor:"assignedOn"},{Header:"Assigned To",accessor:"assignedTo"},{Header:"Technician Comments",accessor:"technicianComments"},{Header:"Closed On",accessor:"closedOn"},{Header:"Paid Through",accessor:"paidThrough"},{Header:"Final Transaction Id",accessor:"finalTransactionId"},{Header:"Final Amount Paid",accessor:"finalAmountPaid"},{Header:"Total Amount Paid",accessor:"totalAmountPaid"},{Header:"Created At",accessor:"createdAt",Cell:e=>{let{value:s}=e;return Me(s)}},{Header:"Updated At",accessor:"updatedAt",Cell:e=>{let{value:s}=e;return Me(s)}}];return ve&&Xe.push({Header:"ACTIONS",accessor:"action",Cell:e=>{const{_id:s,customerLocationReached:a,requestId:r,billGenerated:n}=e.row.original,l="yes"===n?"success":"secondary";return(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-center flex-row",children:["yes"===n?(0,v.jsx)(t.A,{variant:l,className:"ms-2",onClick:()=>{if("yes"===n){const{requestId:s}=e.row.original;(e=>{W("/admin/invoice/".concat(e))})(s)}},children:(0,v.jsx)(P.CiE,{})}):(0,v.jsx)(f.N_,{to:"/admin/bill-information/".concat(s),children:(0,v.jsx)(t.A,{variant:l,className:"ms-2",children:(0,v.jsx)(P.CiE,{})})}),(0,v.jsx)(t.A,{variant:"warning",className:"ms-2",onClick:()=>((e,s,a)=>{"Admin"===_e||s?W("/admin/edit-order/".concat(e)):(ae(e),ie(a),ee(!0))})(s,a,r),children:(0,v.jsx)(p.uO9,{})})]})}}),(0,v.jsxs)("div",{children:[Be?(0,v.jsx)(N.A,{}):(0,v.jsx)(v.Fragment,{children:ke?(0,v.jsx)(O.A,{}):je?(0,v.jsxs)(n.A,{fluid:!0,className:"mt-3 ",children:[(0,v.jsxs)(l.A,{className:"boxShadow p-4 mb-4 mt-4 align-items-center",children:[(0,v.jsx)(o.A,{xs:12,md:2,className:"d-flex align-items-center justify-content-start mb-3 mb-md-0",children:(0,v.jsx)("h4",{className:"fw-bold mb-0",children:"Orders"})}),(0,v.jsxs)(o.A,{xs:12,sm:6,md:3,className:"d-flex flex-column align-items-start  mb-3 mb-md-0",children:[(0,v.jsxs)("p",{className:"mb-0",children:["Total Orders: ",null===qe||void 0===qe?void 0:qe.totalOrders]}),(0,v.jsxs)("p",{className:"mb-0",children:["Completed Orders: ",null===qe||void 0===qe?void 0:qe.completedOrders]})]}),(0,v.jsxs)(o.A,{xs:12,sm:6,md:3,className:"d-flex flex-column align-items-start  mb-3 mb-md-0",children:[(0,v.jsxs)("p",{className:"mb-0",children:["In Process Orders: ",null===qe||void 0===qe?void 0:qe.inProcessOrders]}),(0,v.jsxs)("p",{className:"mb-0",children:["Pending Orders: ",null===qe||void 0===qe?void 0:qe.pendingOrders]})]}),(0,v.jsxs)(o.A,{xs:12,sm:6,md:3,className:"d-flex flex-column align-items-start  mb-3 mb-md-0",children:[(0,v.jsxs)("p",{className:"mb-0",children:["In Transit Orders: ",null===qe||void 0===qe?void 0:qe.inTransitOrders]}),(0,v.jsxs)("p",{className:"mb-0",children:["Cancelled Orders: ",null===qe||void 0===qe?void 0:qe.cancelledOrders]})]})]}),(0,v.jsxs)(l.A,{className:"boxShadow p-3 mb-4 d-flex flex-lg-row flex-column flex-xxl-row flex-xl-row flex-sm-column flex-md-row",children:[(0,v.jsx)(o.A,{className:"my-4 mx-2",xxl:3,xl:3,lg:3,sm:6,md:6,children:(0,v.jsxs)("div",{className:"input-group",children:[(0,v.jsx)("span",{className:"input-group-text",children:(0,v.jsx)(x.YQq,{})}),(0,v.jsx)("input",{type:"text",placeholder:"Search Orders...",className:"form-control",value:B,onChange:e=>G(e.target.value),onKeyPress:e=>{"Enter"===e.key&&Ze()}}),B&&(0,v.jsx)("span",{className:"input-group-text",onClick:()=>{G(""),q("")},children:(0,v.jsx)(x.IeJ,{})})]})}),(0,v.jsx)(o.A,{className:"d-flex flex-column text-center my-4",xxl:2,xl:2,lg:2,sm:3,md:3,children:(0,v.jsx)(t.A,{style:{backgroundColor:e,border:"none"},onClick:Ze,disabled:z||""===B,children:z?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Searching..."]}):"Search"})})]}),(0,v.jsx)(l.A,{className:"boxShadow p-4 mb-4",children:(0,v.jsx)(u.A,{COLUMNS:Xe,MOCK_DATA:s,currentPage:w,startIndex:k,endIndex:E,setCurrentPage:I,totalItems:_,totalPages:L,count:Ee})}),(0,v.jsx)(g.A,{YES:async()=>{try{const a=await Ue({id:Z,role:_e});var e,s;if(Y(!1),Q(""),null!==a&&void 0!==a&&a.data)h.oR.success(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.message,{autoClose:1e3}),Ke();else h.oR.error(null===a||void 0===a||null===(s=a.error)||void 0===s?void 0:s.data.error,{autoClose:1e3})}catch(ze){console.error(ze)}},DELETESTATE:V,ONCLICK:()=>{Y(!1)},DESCRIPTION:"Are you sure want to delete this Orders",DELETETITLE:"Orders"})]}):(0,v.jsx)(b.A,{})}),(0,v.jsxs)(c.A,{show:$,onHide:Qe,centered:!0,children:[(0,v.jsx)(c.A.Header,{closeButton:!0,children:(0,v.jsx)(c.A.Title,{children:"Send OTP"})}),(0,v.jsx)(c.A.Body,{children:"Customer location has not been reached. Do you want to send an OTP to the customer?"}),(0,v.jsxs)(c.A.Footer,{children:[(0,v.jsx)(t.A,{variant:"secondary",onClick:Qe,children:"Cancel"}),(0,v.jsx)(t.A,{onClick:async()=>{ee(!1);const e=s.find((e=>e._id===se));if(e&&e.phoneNumber){const s=e.phoneNumber.replace(/^(\+91)/,"");le(s);try{var a;const e=await We({phoneNumber:s});200===(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data.responseCode)?(te(!0),me(e.data.data.data.verificationId),h.oR.success("OTP sent successfully!",{autoClose:1e3})):h.oR.error(null===e||void 0===e?void 0:e.data.data.message,{autoClose:1e3})}catch(ze){console.error(ze)}}else console.error("Selected order or phone number is undefined.")},style:{backgroundColor:e,border:"none"},children:"Send OTP"})]})]}),(0,v.jsxs)(c.A,{show:re,onHide:Je,centered:!0,children:[(0,v.jsx)(c.A.Header,{closeButton:!0,children:(0,v.jsx)(c.A.Title,{children:"Enter OTP"})}),(0,v.jsxs)(c.A.Body,{children:[(0,v.jsxs)(i.A.Group,{children:[(0,v.jsxs)(i.A.Label,{children:["Enter the OTP sent to ",ne," Number"," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)("div",{className:"d-flex justify-content-between",children:oe.map(((e,s)=>(0,v.jsx)(i.A.Control,{type:"text",maxLength:"1",value:e,onChange:e=>((e,s)=>{if(isNaN(e.value))return!1;const a=[...oe];a[s]=e.value,de(a),e.nextSibling&&e.value&&e.nextSibling.focus()})(e.target,s),onKeyDown:e=>((e,s)=>{if("Backspace"===e.key){const e=[...oe];e[s]="",de(e),s>0&&Le.current[s-1].focus()}})(e,s),ref:e=>Le.current[s]=e,className:"otp-input mx-1",style:{width:"3rem",height:"3rem",margin:"0 0.5rem",fontSize:"1rem",borderRadius:4,border:"1px solid rgba(0,0,0,0.3)",textAlign:"center"},centered:!0},s)))}),xe&&(0,v.jsx)(i.A.Text,{className:"text-danger",children:"Please enter the OTP."})]}),(0,v.jsxs)("div",{className:"text-center mt-3",children:[(0,v.jsxs)("p",{children:["Resend OTP in ",Oe," seconds"]}),(0,v.jsx)(t.A,{onClick:async()=>{const e=s.find((e=>e._id===se));if(e&&e.phoneNumber){const s=e.phoneNumber.replace(/^(\+91)/,"");le(s);try{var a,r;const e=await We({phoneNumber:s});console.log(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data),console.log("-----------------------------"),200===(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.data.responseCode)?(me(e.data.data.data.verificationId),h.oR.success("OTP sent successfully!",{autoClose:1e3}),Ye()):h.oR.error(null===e||void 0===e?void 0:e.data.data.message,{autoClose:1e3})}catch(ze){console.error(ze)}}else console.error("Selected order or phone number is undefined.")},variant:"link",disabled:!we,children:"Resend OTP"})]})]}),(0,v.jsxs)(c.A.Footer,{children:[(0,v.jsx)(t.A,{variant:"secondary",onClick:Je,children:"Cancel"}),(0,v.jsx)(t.A,{variant:"primary",onClick:async()=>{const e=oe.join("");if(e.length<4)he(!0);else{try{const a=await Ve({requestId:ce,phoneNumber:ne,verificationId:ue,code:e});var s;if("VERIFICATION_COMPLETED"===a.data.data.data.verificationStatus)h.oR.success("OTP verified successfully!",{autoClose:1e3}),te(!1),de(new Array(4).fill("")),W("/admin/edit-order/".concat(se));else h.oR.error((null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to verify OTP",{autoClose:1e3})}catch(ze){console.error(ze),h.oR.error("Failed to verify OTP",{autoClose:1e3})}he(!1)}},children:"Submit OTP"})]})]})]})}},39585:()=>{}}]);
//# sourceMappingURL=9807.6d90705b.chunk.js.map