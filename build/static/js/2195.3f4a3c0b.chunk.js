"use strict";(self.webpackChunklaptop_rental_web_app=self.webpackChunklaptop_rental_web_app||[]).push([[2195],{98943:(e,s,a)=>{a.d(s,{A:()=>f});var l=a(65043),r=a(71094),t=a(53519),n=a(61072),c=a(78602),o=a(24522),d=a(14282),i=a(64196),m=a(49804),x=a(60184),u=a(3825),h=a(92157),g=a.n(h),p=a(13441),j=(a(39585),a(70579));const f=e=>{const s=(0,l.useMemo)((()=>e.COLUMNS),[e.COLUMNS]),a=(0,l.useMemo)((()=>e.MOCK_DATA||[]),[e.MOCK_DATA]),{getTableProps:h,getTableBodyProps:f,headerGroups:b,setGlobalFilter:A,prepareRow:N,rows:C,state:w}=(0,r.useTable)({columns:s,data:a,autoResetWidth:!1},r.useGlobalFilter,r.useSortBy,r.usePagination);return(0,j.jsx)("div",{children:(0,j.jsxs)(t.A,{fluid:!0,className:"ml-xxl-n4 ml-xl-n4 ml-lg-n4",children:[!1!==e.isHeading?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(n.A,{className:"d-flex  flex-lg-row flex-column flex-xxl-row flex-xl-row flex-sm-column flex-md-row",children:[(0,j.jsx)(c.A,{className:"my-4",xxl:3,xl:3,lg:3,sm:6,md:6,children:(0,j.jsx)(o.A.Control,{placeholder:"Search here...",value:w.globalFilter||"",onChange:e=>A(e.target.value.trim()),className:""})}),(0,j.jsx)(c.A,{className:"d-flex flex-column text-center my-4",xxl:2,xl:2,lg:2,sm:3,md:3,children:(0,j.jsx)(d.A,{className:" text-white fw-bold ",style:{outline:"none",border:"none",backgroundColor:"#db6300"},children:"Search"})})]})}):(0,j.jsx)(j.Fragment,{}),(0,j.jsxs)(n.A,{children:[(0,j.jsxs)(i.A,{className:"justify-content-center align-items-center",striped:!0,bordered:!0,hover:!0,...h(),responsive:!0,style:{width:"100%"},children:[(0,j.jsx)("thead",{children:b.map(((e,s)=>(0,l.createElement)("tr",{...e.getHeaderGroupProps(),key:s},e.headers.map(((e,s)=>(0,l.createElement)("th",{...e.getHeaderProps(),key:s,className:"text-center text-dark",style:{width:"".concat(e.width,"px"),whiteSpace:"nowrap",justifyContent:"center",alignItems:"center"},onClick:s=>{s.target.classList.contains("fa-sort")||"ACTIONS"===e.render("Header")||e.toggleSortBy(!e.isSortedDesc)}},"ACTIONS"===e.render("Header")?(0,j.jsx)(j.Fragment,{children:e.render("Header")}):(0,j.jsxs)("div",{children:[e.render("Header"),(0,j.jsx)(x.MjW,{className:"mx-2"})]})))))))}),(0,j.jsx)("tbody",{...f(),children:C.length>0?C.map(((e,s)=>(N(e),(0,l.createElement)("tr",{...e.getRowProps(),key:s},e.cells.map(((e,s)=>{const a="action"===e.column.id||"write"===e.column.id||"read"===e.column.id||"fullAccess"===e.column.id;return(0,l.createElement)("td",{...e.getCellProps(),key:s,className:"text-secondary text-start",style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"20ch"}},a||e.value?e.render("Cell"):"-")})))))):(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:s.length,className:"text-center text-dark",children:"No Data Found"})})})]}),!1!==e.isPagination?(0,j.jsxs)(j.Fragment,{children:[" ",(0,j.jsxs)(c.A,{className:"".concat(page.length>0?"d-flex":"d-none"," flex-row justify-content-center align-items-center"),children:[(0,j.jsxs)(c.A,{className:"d-flex justify-content-start align-items-center flex-wrap",children:[(0,j.jsxs)("span",{className:"m-1",children:["Page"," ",(0,j.jsxs)("strong",{className:"m-2",children:[e.currentPage," of ",e.totalPages]})]}),(0,j.jsx)(n.A,{children:(0,j.jsxs)("span",{className:"m-1",children:["Items per page"," ",(0,j.jsx)("strong",{className:"m-2",children:e.itemsPerPage})]})})]}),(0,j.jsx)(c.A,{className:"d-none d-sm-none d-md-none d-xxl-flex d-xl-flex d-lg-flex justify-content-end align-items-center",children:(0,j.jsx)(g(),{breakLabel:"...",onPageChange:s=>e.setCurrentPage(s.selected+1),pageRangeDisplayed:5,pageCount:e.totalPages,renderOnZeroPageCount:null,activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",containerClassName:"pagination",previousLabel:(0,j.jsx)(p.Vx.Provider,{value:{color:"#db6300",size:"28px"},children:(0,j.jsx)(u.dnY,{})}),nextLabel:(0,j.jsx)(p.Vx.Provider,{value:{color:"#db6300",size:"28px"},children:(0,j.jsx)(u.m2f,{})})})}),(0,j.jsxs)(c.A,{className:"d-flex d-sm-flex d-md-flex d-xxl-none d-xl-none d-lg-none justify-content-end align-items-center",children:[(0,j.jsx)(d.A,{style:{backgroundColor:"#db6300",border:"none"},onClick:()=>e.setCurrentPage(e.currentPage-1),disabled:1===e.currentPage,className:"m-2",children:(0,j.jsx)(m.o_z,{size:14})}),(0,j.jsx)(d.A,{style:{backgroundColor:"#db6300",border:"none"},onClick:()=>{e.setCurrentPage(e.currentPage+1)},disabled:e.currentPage===e.totalPages,children:(0,j.jsx)(m.hdn,{size:14})})]})]})]}):(0,j.jsx)(j.Fragment,{})]})]})})}},62195:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var l=a(65043),r=a(53519),t=a(61072),n=a(78602),c=a(24522),o=a(14282),d=a(27417),i=a(98943),m=a(13624),x=a(63401),u=a(32479),h=a(39110),g=a(2519),p=a(36653),j=a(85959),f=a(70579);const b=()=>{const{color:e}=(0,p.D)(),[s,a]=(0,l.useState)([]),[b,A]=(0,l.useState)([]),[N,C]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[y,v]=(0,l.useState)("Technician"),[P,S]=(0,l.useState)(!1),[F,_]=(0,l.useState)(!1),H=(0,u.L)(),{data:L,isError:M,error:O,refetch:R,isLoading:T}=(0,m.uX)({selectedRole:y,role:H}),{data:D}=(0,m.sF)({role:H}),[E]=(0,m.Dj)({role:H});(0,l.useEffect)((()=>{L&&L.data&&(a(L.data.modules),C(L.moduleAccess.read),k(L.moduleAccess.write)),M&&500===(null===O||void 0===O?void 0:O.status)?_(!0):_(!1)}),[L,N,w,O,M]),(0,l.useEffect)((()=>{D&&D.data&&(A(D.data),D.data.includes(y)||v("Technician"))}),[D]),(0,l.useEffect)((()=>{R({role:y})}),[y]);const z=(e,s)=>{a((a=>a.map((a=>{if(a._id===e){const e={...a,[s]:!a[s]};return"fullAccess"===s?(e.read=e.fullAccess,e.write=e.fullAccess):"write"===s?(e.read=!0,e.fullAccess=!1):"read"!==s||e.read||(e.write=!1,e.fullAccess=!1),e}return a}))))},G=[{Header:"Module Name",accessor:"name"},{Header:"Read",accessor:"read",Cell:e=>{let{row:s}=e;return(0,f.jsxs)("label",{className:"custom-checkbox my-2",children:[(0,f.jsx)("input",{disabled:!w,type:"checkbox",checked:s.original.read||!1,onChange:()=>z(s.original._id,"read")}),(0,f.jsx)("span",{className:"checkmark"})]})}},{Header:"Write",accessor:"write",Cell:e=>{let{row:s}=e;return(0,f.jsxs)("label",{className:"custom-checkbox my-2",children:[(0,f.jsx)("input",{type:"checkbox",disabled:!w,checked:s.original.write||!1,onChange:()=>z(s.original._id,"write")}),(0,f.jsx)("span",{className:"checkmark"})]})}},{Header:"Full Access",accessor:"fullAccess",Cell:e=>{let{row:s}=e;return(0,f.jsxs)("label",{className:"custom-checkbox my-2",children:[(0,f.jsx)("input",{disabled:!w,type:"checkbox",checked:s.original.fullAccess||!1,onChange:()=>z(s.original._id,"fullAccess")}),(0,f.jsx)("span",{className:"checkmark"})]})}}];return(0,f.jsx)("div",{children:T?(0,f.jsx)(h.A,{}):(0,f.jsx)(f.Fragment,{children:F?(0,f.jsx)(j.A,{}):N?(0,f.jsxs)(r.A,{fluid:!0,className:"mt-3 ",children:[(0,f.jsxs)(t.A,{className:"boxShadow p-4 mb-4 mt-4 align-items-center",children:[(0,f.jsx)(n.A,{xs:12,sm:6,children:(0,f.jsx)("h4",{className:"fw-bold",children:"Role & Module Access"})}),(0,f.jsxs)(n.A,{xs:12,sm:6,className:"d-flex justify-content-end align-items-center",children:[(0,f.jsx)(c.A.Select,{value:y,onChange:e=>{v(e.target.value)},className:"me-2",style:{width:"200px"},children:b.map((e=>(0,f.jsx)("option",{value:e,children:e},e)))}),w&&(0,f.jsx)(o.A,{style:{backgroundColor:e,border:"none"},onClick:async()=>{S(!0),console.log("Data before formatting:",s);const e={modules:s.map((e=>({moduleName:e.moduleName,read:e.read,write:e.write,fullAccess:e.fullAccess})))};try{(await E({selectedRole:y,data:e,role:H})).data?(x.oR.success("Changes saved successfully",{autoClose:1e3}),R()):x.oR.error("Failed to save changes",{autoClose:1e3})}catch(O){console.error(O)}finally{S(!1)}},disabled:P,children:P?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Saving..."]}):"Save"})]})]}),(0,f.jsx)(t.A,{className:"boxShadow p-4 mb-4",children:(0,f.jsx)(i.A,{COLUMNS:G,MOCK_DATA:s,isPagination:!1,isHeading:!1})})]}):(0,f.jsx)(g.A,{})})})}},39585:()=>{}}]);
//# sourceMappingURL=2195.3f4a3c0b.chunk.js.map