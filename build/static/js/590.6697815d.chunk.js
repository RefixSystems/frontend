"use strict";(self.webpackChunklaptop_rental_web_app=self.webpackChunklaptop_rental_web_app||[]).push([[590],{13256:(e,a,n)=>{n.d(a,{A:()=>t});n(65043);var s=n(24522),l=n(70579);const t=e=>{const{label:a,name:n,id:t,type:i,placeholder:o,htmlFor:d,lableClassName:r,value:c,onChange:m,onBlur:u,disabled:x,className:h,lg:g,md:j,xxl:f,xl:p,sm:A,validation:v,star:N,ref:T,accept:C}=e;return(0,l.jsxs)(s.A.Group,{children:[(0,l.jsxs)(s.A.Label,{htmlFor:d,className:r,children:[a,(0,l.jsx)("span",{className:"text-danger ".concat("none"===N?"d-".concat(N):""),children:"*"})]}),(0,l.jsx)(s.A.Control,{name:n,id:t,type:i,placeholder:o,value:c,onChange:m,onBlur:u,disabled:x,className:h,lg:g,md:j,xxl:f,xl:p,sm:A,ref:T,accept:null!==C&&void 0!==C?C:""}),v]})}},590:(e,a,n)=>{n.r(a),n.d(a,{default:()=>A});var s=n(867),l=n(65043),t=n(53519),i=n(24522),o=n(61072),d=n(78602),r=n(73216),c=n(3825),m=n(4207),u=n(13256),x=n(63401),h=n(80899);const g=h.Ik().shape({status:h.Yj().required("Status is required"),assignedTo:h.Yj().required("Assigned To is required"),assignedOn:h.p6().required("Assigned On is required").nullable(),technicianComments:h.Yj().required("Technician Comments are required"),notes:h.Yj().required("Notes is required"),closedOn:h.p6().required("Closed On is required").nullable(),totalAmount:h.ai().required("Total Amount is required").min(100,"Total Amount must be at least 100"),paidThrough:h.Yj().required("Paid Through is required"),finalTransaction:h.Yj().required("Final Transaction is required"),finalAmountPaid:h.Yj().required("Final Amount Paid is required")});var j=n(65797),f=n(32479),p=n(70579);const A=()=>{const[e,a]=(0,l.useState)(""),[n,h]=(0,l.useState)(""),[A,v]=(0,l.useState)(""),[N,T]=(0,l.useState)(""),[C,b]=(0,l.useState)(""),[O,y]=(0,l.useState)(""),[w,q]=(0,l.useState)(""),[P,S]=(0,l.useState)(""),[k,B]=(0,l.useState)(""),{id:I}=(0,r.g)(),F=I.startsWith(":")?I.slice(1):I,L=(0,f.L)(),[Y,{isLoading:_}]=(0,j.Q)(),{data:E}=(0,j.my)({id:F,role:L}),{data:R}=(0,j.WI)({role:L}),[G,V]=(0,l.useState)([]);(0,l.useEffect)((()=>{R&&R.data&&V(R.data)}),[R]);const U=(0,r.Zp)(),W=()=>{U("/admin/orders")};(0,l.useEffect)((()=>{E&&E.data&&(a(E.data.status),h(E.data.assignedTo),v(E.data.assignedOn),T(E.data.technicianComments),B(E.data.notes),b(E.data.closedOn),y(E.data.paidThrough),q(E.data.finalTransaction),S(E.data.finalAmountPaid))}),[E]);const D=async()=>{try{const a=await Y({id:F,data:{status:e,assignedTo:n,assignedOn:A,technicianComments:N,notes:k,closedOn:C,paidThrough:O,finalTransactionId:w,finalAmountPaid:P},role:L});a.data?(x.oR.success(a.data.message,{autoClose:3e3}),U("/admin/orders")):x.oR.error(a.error.data.error,{autoClose:3e3})}catch(a){console.error(a)}},Q="Admin"!==L&&"Order Assigner"!==L;return(0,p.jsx)("div",{children:(0,p.jsx)(t.A,{fluid:!0,className:"",children:(0,p.jsx)(s.l1,{initialValues:{status:"",assignedTo:"",assignedOn:"",technicianComments:"",notes:"",closedOn:"",paidThrough:"",finalTransaction:"",finalAmountPaid:""},validationSchema:g,onSubmit:D,children:s=>{let{values:l,errors:t,touched:r,handleChange:j,handleBlur:f,handleSubmit:I,isSubmitting:F}=s;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(i.A,{children:[(0,p.jsxs)(o.A,{className:"d-flex flex-row justify-content-between align-items-center",children:[(0,p.jsxs)(d.A,{className:"d-flex justify-content-start mb-3 mt-3",children:[(0,p.jsx)("h4",{onClick:W,className:"mx-2",children:(0,p.jsx)(c.nXt,{})}),(0,p.jsx)("h4",{children:"Edit Order"})]}),(0,p.jsxs)(d.A,{className:"d-sm-none d-none d-md-none d-lg-flex d-xxl-flex d-xl-flex flex-row justify-content-end align-items-center",children:[(0,p.jsx)(m.A,{className:"m-1",variant:"secondary",onClick:W,label:"Cancel"}),(0,p.jsx)(m.A,{className:"m-1",label:"Update",type:"button",isLoading:_,loaderVariant:"info",disabled:F,onClick:async()=>{try{const a=Object.keys(r);for(const s of a)await g.validateAt(s,{status:e,assignedTo:n,assignedOn:A,notes:k,technicianComments:N,closedOn:C,finalTransaction:w,paidThrough:O,finalAmountPaid:P});D()}catch(a){x.oR.error(a.message,{autoClose:1e3})}}})]})]}),(0,p.jsxs)(o.A,{className:"d-flex flex-wrap flex-lg-row flex-xxl-row flex-xl-row flex-column flex-md-column flex-sm-column  mt-4",children:[(0,p.jsxs)(d.A,{className:"m-1 p-4 d-flex flex-wrap flex-column shadow rounded bg-white",children:[(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsxs)(i.A.Group,{controlId:"status",children:[(0,p.jsxs)(i.A.Label,{children:["Edit Status",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsxs)(i.A.Select,{value:e,className:"form-control ".concat(r.status&&t.status?"is-invalid":""),onChange:e=>{a(e.target.value),j(e)},onBlur:f,children:[(0,p.jsx)("option",{value:"Pending",children:"Pending"}),(0,p.jsx)("option",{value:"In Process",children:"In Process"}),(0,p.jsx)("option",{value:"In Transit",children:"In Transit"}),(0,p.jsx)("option",{value:"Completed",children:"Completed"}),(0,p.jsx)("option",{value:"Cancelled",children:"Cancelled"})]}),r.status&&t.status?(0,p.jsx)("p",{className:"text-danger",children:t.status}):null]})}),(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsxs)(i.A.Group,{controlId:"assignedTo",children:[(0,p.jsxs)(i.A.Label,{children:["Assigned To",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsxs)(i.A.Select,{value:n,className:"form-control ".concat(r.assignedTo&&t.assignedTo?"is-invalid":""),onChange:e=>{h(e.target.value),j(e)},onBlur:f,disabled:Q,children:[(0,p.jsx)("option",{value:"",children:"Select an employee"}),0===G.length?(0,p.jsx)("option",{value:"",disabled:!0,children:"No employees found"}):G.map(((e,a)=>(0,p.jsx)("option",{value:e,children:e},a)))]}),r.assignedTo&&t.assignedTo?(0,p.jsx)("p",{className:"text-danger",children:t.assignedTo}):null]})}),(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsx)(u.A,{label:"Assigned On",type:"date",name:"assignedOn",value:A,className:"form-control ".concat(r.assignedOn&&t.assignedOn?"is-invalid":""),onChange:e=>{v(e.target.value),j(e)},onBlur:f,disabled:Q,validation:r.assignedOn&&t.assignedOn?(0,p.jsx)("p",{className:"text-danger",children:t.assignedOn}):""})}),(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsx)(u.A,{label:"Technician Comments",type:"text",name:"technicianComments",value:N,className:"form-control ".concat(r.technicianComments&&t.technicianComments?"is-invalid":""),onChange:e=>{T(e.target.value),j(e)},onBlur:f,validation:r.technicianComments&&t.technicianComments?(0,p.jsx)("p",{className:"text-danger",children:t.technicianComments}):""})}),(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsx)(u.A,{label:"Notes",type:"",name:"notes",value:k,className:"form-control ".concat(r.notes&&t.notes?"is-invalid":""),onChange:e=>{B(e.target.value),j(e)},onBlur:f,validation:r.notes&&t.notes?(0,p.jsx)("p",{className:"text-danger",children:t.notes}):""})})]}),(0,p.jsxs)(d.A,{className:"m-1 p-4 d-flex flex-wrap flex-column shadow rounded bg-white",children:[(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsx)(u.A,{label:"Final Amount Paid",type:"number",name:"finalAmountPaid",value:P,className:"form-control ".concat(r.finalAmountPaid&&t.finalAmountPaid?"is-invalid":""),onChange:e=>{S(e.target.value),j(e)},onBlur:f,validation:r.finalAmountPaid&&t.finalAmountPaid?(0,p.jsx)("p",{className:"text-danger",children:t.finalAmountPaid}):""})}),(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsx)(u.A,{label:"Closed On",type:"date",name:"closedOn",value:C,className:"form-control ".concat(r.closedOn&&t.closedOn?"is-invalid":""),onChange:e=>{b(e.target.value),j(e)},onBlur:f,validation:r.closedOn&&t.closedOn?(0,p.jsx)("p",{className:"text-danger",children:t.closedOn}):""})}),(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsx)(u.A,{label:"Paid Through",type:"text",name:"paidThrough",value:O,className:"form-control ".concat(r.paidThrough&&t.paidThrough?"is-invalid":""),onChange:e=>{y(e.target.value),j(e)},onBlur:f,validation:r.paidThrough&&t.paidThrough?(0,p.jsx)("p",{className:"text-danger",children:t.paidThrough}):""})}),(0,p.jsx)(d.A,{className:"m-2",lg:"12",xxl:"12",xl:"12",md:"12",sm:"12",children:(0,p.jsx)(u.A,{label:"Final Transaction ID",type:"text",name:"finalTransaction",value:w,className:"form-control ".concat(r.finalTransaction&&t.finalTransaction?"is-invalid":""),onChange:e=>{q(e.target.value),j(e)},onBlur:f,validation:r.finalTransaction&&t.finalTransaction?(0,p.jsx)("p",{className:"text-danger",children:t.finalTransaction}):""})})]})]}),(0,p.jsxs)(o.A,{className:"d-lg-none d-xl-none d-xxl-none flex-row justify-content-around align-items-center",children:[(0,p.jsx)(d.A,{className:"d-flex justify-content-start align-items-center",children:(0,p.jsx)(m.A,{className:"m-1",variant:"secondary",onClick:W,label:"Cancel"})}),(0,p.jsx)(d.A,{className:"d-flex justify-content-end align-items-center",children:(0,p.jsx)(m.A,{className:"m-1",label:"Update",type:"button",isLoading:_,loaderVariant:"info",disabled:F,onClick:async()=>{try{const a=Object.keys(r);for(const s of a)await g.validateAt(s,{status:e,assignedTo:n,assignedOn:A,notes:k,technicianComments:N,closedOn:C,finalTransaction:w,paidThrough:O,finalAmountPaid:P});D()}catch(a){x.oR.error(a.message,{autoClose:1e3})}}})})]})]})})}})})})}}}]);
//# sourceMappingURL=590.6697815d.chunk.js.map