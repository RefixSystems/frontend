"use strict";(self.webpackChunklaptop_rental_web_app=self.webpackChunklaptop_rental_web_app||[]).push([[9056],{98954:(e,a,t)=>{t.d(a,{A:()=>j});var s=t(65043),l=t(71094),r=t(53519),n=t(61072),o=t(64196),d=t(78602),i=t(14282),c=t(49804),u=t(60184),m=t(3825),x=t(92157),h=t.n(x),p=t(13441),g=(t(39585),t(36653)),A=t(70579);const j=e=>{const{color:a}=(0,g.D)(),t=(0,s.useMemo)((()=>e.COLUMNS),[e.COLUMNS]),x=(0,s.useMemo)((()=>e.MOCK_DATA||[]),[e.MOCK_DATA]),{getTableProps:j,getTableBodyProps:v,headerGroups:b,prepareRow:f,page:C}=(0,l.useTable)({columns:t,data:x,autoResetWidth:!1},l.useGlobalFilter,l.useSortBy,l.usePagination);return(0,A.jsx)("div",{children:(0,A.jsx)(r.A,{fluid:!0,className:"ml-xxl-n4 ml-xl-n4 ml-lg-n4",children:(0,A.jsxs)(n.A,{children:[(0,A.jsxs)(o.A,{className:"justify-content-center align-items-center",striped:!0,hover:!0,...j(),responsive:!0,style:{width:"100%",marginLeft:"25px"},children:[(0,A.jsx)("thead",{children:b.map(((e,a)=>(0,s.createElement)("tr",{...e.getHeaderGroupProps(),key:a},e.headers.map(((e,a)=>(0,s.createElement)("th",{...e.getHeaderProps(),key:a,className:"text-center text-dark",style:{width:"".concat(e.width,"px"),whiteSpace:"nowrap",justifyContent:"center",alignItems:"center"},onClick:a=>{a.target.classList.contains("fa-sort")||"ACTIONS"===e.render("Header")||e.toggleSortBy(!e.isSortedDesc)}},"ACTIONS"===e.render("Header")?(0,A.jsx)(A.Fragment,{children:e.render("Header")}):(0,A.jsxs)("div",{children:[e.render("Header"),(0,A.jsx)(u.MjW,{className:"mx-2"})]})))))))}),(0,A.jsx)("tbody",{...v(),children:C.length>0?C.map(((a,t)=>(f(a),(0,s.createElement)("tr",{...a.getRowProps(),key:t},a.cells.map(((a,l)=>{const r="action"===a.column.id||"localShop"===a.column.id||"serviceCenter"===a.column.id||"ourServices"===a.column.id||"addInCarousel"===a.column.id;return(0,s.createElement)("td",{...a.getCellProps(),key:l,className:"text-secondary text-start",style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"20ch",backgroundColor:t<=e.count-1?"#cfd1d1":""}},r||a.value?a.render("Cell"):"-")})))))):(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:t.length,className:"text-center text-dark",children:"No Data Found"})})})]}),(0,A.jsxs)(d.A,{className:"".concat(C.length>0?"d-flex":"d-none"," flex-row justify-content-center align-items-center"),children:[(0,A.jsx)(d.A,{className:"d-flex justify-content-start align-items-center flex-wrap",children:(0,A.jsxs)("span",{className:"m-1",children:["Showing","",(0,A.jsxs)("strong",{className:"m-2",children:[e.startIndex," to ",e.endIndex," of"," ",(0,A.jsxs)("strong",{className:"m-2",children:[" ",e.totalItems," entries"]})]})]})}),(0,A.jsx)(d.A,{className:" mt-3 d-none d-sm-none d-md-none d-xxl-flex d-xl-flex d-lg-flex justify-content-end align-items-center",children:(0,A.jsx)(h(),{breakLabel:"...",onPageChange:a=>e.setCurrentPage(a.selected+1),pageRangeDisplayed:5,pageCount:e.totalPages,renderOnZeroPageCount:null,activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",containerClassName:"pagination",previousLabel:(0,A.jsx)(p.Vx.Provider,{value:{color:a,size:"28px"},children:(0,A.jsx)(m.dnY,{})}),nextLabel:(0,A.jsx)(p.Vx.Provider,{value:{color:a,size:"28px"},children:(0,A.jsx)(m.m2f,{})})})}),(0,A.jsxs)(d.A,{className:"d-flex d-sm-flex d-md-flex d-xxl-none d-xl-none d-lg-none justify-content-end align-items-center",children:[(0,A.jsx)(i.A,{style:{backgroundColor:a,border:"none"},onClick:()=>e.setCurrentPage(e.currentPage-1),disabled:1===e.currentPage,className:"m-2",children:(0,A.jsx)(c.o_z,{size:14})}),(0,A.jsx)(i.A,{style:{backgroundColor:a,border:"none"},onClick:()=>{e.setCurrentPage(e.currentPage+1)},disabled:e.currentPage===e.totalPages,children:(0,A.jsx)(c.hdn,{size:14})})]})]})]})})})}},29056:(e,a,t)=>{t.r(a),t.d(a,{default:()=>P});var s=t(65043),l=t(53519),r=t(61072),n=t(78602),o=t(24522),d=t(14282),i=t(27417),c=t(25284),u=t(98954),m=t(65797),x=t(31462),h=t(63401),p=t(6720),g=t(32479),A=t(39110),j=t(11238),v=t(37762),b=(t(20557),t(2519)),f=t(36653),C=t(31121),N=t(23237),y=t(2364),w=t(85959),S=t(70579);const P=()=>{const{color:e}=(0,f.D)(),[a,t]=(0,s.useState)([]),[P,k]=(0,s.useState)(1),[W,I]=(0,s.useState)(1),[T,H]=(0,s.useState)(1),[_,E]=(0,s.useState)(1),[D,O]=(0,s.useState)(0),[L,F]=(0,s.useState)(""),[R,M]=(0,s.useState)(""),[z,U]=(0,s.useState)(!1),[B,G]=(0,s.useState)(""),[q,Y]=(0,s.useState)(""),[K,V]=(0,s.useState)(""),[J,Q]=(0,s.useState)(!1),[Z,X]=(0,s.useState)(!1),[$,ee]=(0,s.useState)(!1),[ae,te]=(0,s.useState)(!1),[se,le]=(0,s.useState)([]),[re,ne]=(0,s.useState)("All"),[oe,de]=(0,s.useState)(!1),[ie,ce]=(0,s.useState)(!1),ue=(0,g.L)(),me=(0,N.h)(),{data:xe,isLoading:he,isError:pe,error:ge}=(0,m.to)({page:P,search:L,role:ue,startDate:B,endDate:q,dayFilter:K,assigned:"All"===re?"":re,type:"order",limit:"10",email:me}),{data:Ae}=(0,m.iM)({role:ue}),{data:je,refetch:ve}=(0,m.lg)({role:ue,search:L,startDate:B,endDate:q,dayFilter:K,assigned:"All"===re?"":re,type:"order",email:me}),be=e=>(0,C.GP)(new Date(e),"dd-MMM-yyyy h:mm a");(0,s.useEffect)((()=>{xe&&xe.data&&(t(xe.data),I(xe.pagination.startIndex),k(P),O(xe.pagination.totalItems),H(xe.pagination.endIndex),E(xe.pagination.totalPages),te(xe.moduleAccess.fullAccess),X(xe.moduleAccess.write),ee(xe.moduleAccess.read)),pe&&500===(null===ge||void 0===ge?void 0:ge.status)?ce(!0):ce(!1)}),[xe,P,ue,ge,pe]),(0,s.useEffect)((()=>{Ae&&Ae.data&&le(["All",...Ae.data])}),[Ae]),(0,s.useEffect)((()=>{ve({search:L,role:re})}),[re]);const fe=()=>{U(!0),F(R),ve({page:P,search:R}).then((()=>{U(!1)}))},Ce=[{Header:"ID",accessor:"s_no"},{Header:"User Name",accessor:"userName"},{Header:"Phone Number",accessor:"phoneNumber"},{Header:"Alternate Phone Number",accessor:"alternatePhoneNumber"},{Header:"Total Orders",accessor:"totalOrders"},{Header:"Email",accessor:"email"},{Header:"Request Id",accessor:"requestId"},{Header:"Address",accessor:"address"},{Header:"Type",accessor:"type"},{Header:"Transaction Id",accessor:"transactionId"},{Header:"Status",accessor:"status"},{Header:"Details",accessor:"details"},{Header:"Amount",accessor:"amount"},{Header:" Initial Amount Paid Through",accessor:"initialAmountPaidThrough"},{Header:"Assigned To",accessor:"assignedTo"},{Header:"Assigned On",accessor:"assignedOn"},{Header:"Technician Comments",accessor:"technicianComments"},{Header:"Closed On",accessor:"closedOn"},{Header:"Paid",accessor:"paidThrough"},{Header:"Final Transaction Id",accessor:"finalTransactionId"},{Header:"Total Amount",accessor:"totalAmount"},{Header:"Notes",accessor:"notes"},{Header:"Created At",accessor:"createdAt",Cell:e=>{let{value:a}=e;return be(a)}},{Header:"Updated At",accessor:"updatedAt",Cell:e=>{let{value:a}=e;return be(a)}}],Ne=async e=>{de(!0);try{const{data:t,error:s}=je;if(t&&Array.isArray(t)){if(0===t.length)return void h.oR.warn("No data to export",{autoClose:1e3});const s=t.map((e=>{var a,t,s,l,r,n,o,d,i,c,u,m,x,h,p,g,A,j,v,b,f,C,N,y;return{s_no:null!==(a=e.s_no)&&void 0!==a?a:"-",userName:null!==(t=e.userName)&&void 0!==t?t:"-",phoneNumber:null!==(s=e.phoneNumber)&&void 0!==s?s:"-",alternatePhoneNumber:null!==(l=e.alternatePhoneNumber)&&void 0!==l?l:"-",totalOrders:null!==(r=e.totalOrders)&&void 0!==r?r:"-",email:null!==(n=e.email)&&void 0!==n?n:"-",requestId:null!==(o=e.requestId)&&void 0!==o?o:"-",Address:null!==(d=e.address)&&void 0!==d?d:"-",type:null!==(i=e.type)&&void 0!==i?i:"-",status:null!==(c=e.status)&&void 0!==c?c:"-",details:null!==(u=e.details)&&void 0!==u?u:"-",amount:null!==(m=e.amount)&&void 0!==m?m:"-",initialAmountPaidThrough:null!==(x=e.initialAmountPaidThrough)&&void 0!==x?x:"-",technicianComments:null!==(h=e.technicianComments)&&void 0!==h?h:"-",closed:null!==(p=e.closed)&&void 0!==p?p:"-",paid:null!==(g=e.paid)&&void 0!==g?g:"-",notes:null!==(A=e.notes)&&void 0!==A?A:"-",assignedTo:null!==(j=e.assignedTo)&&void 0!==j?j:"-",assignedOn:null!==(v=e.assignedOn)&&void 0!==v?v:"-",transactionId:null!==(b=e.transactionId)&&void 0!==b?b:"-",finalTransactionId:null!==(f=e.finalTransactionId)&&void 0!==f?f:"-",totalAmount:null!==(C=e.totalAmount)&&void 0!==C?C:"-",createdAt:null!==(N=e.createdAt)&&void 0!==N?N:"-",updatedAt:null!==(y=e.updatedAt)&&void 0!==y?y:"-"}})),l=["S.No","User Name","Phone Number","Alternative Ph.No","Total Orders","Email","Request Id","Address","Type","Status","Details","Amount","Initial Amount Paid","Technician Comments","Closed","Paid","Notes","Assigned To","Assigned On","Transaction Id","Final Transaction Id","Total Amount","Created At","Updated At"];if("xlsx"===e){const e="exported_order.xlsx",a=j.Wp.json_to_sheet(s);j.Wp.sheet_add_aoa(a,[l],{origin:"A1"});const t=j.Wp.book_new();j.Wp.book_append_sheet(t,a,"order"),j._h(t,e)}else if("pdf"===e)try{const e=new v.default({orientation:"landscape",format:"a1"}),a=s.map((e=>Object.values(e)));e.autoTable({head:[l],body:a,theme:"striped",styles:{overflow:"linebreak",fontSize:10},columnStyles:{0:{cellWidth:15},1:{cellWidth:25},2:{cellWidth:30},3:{cellWidth:30},4:{cellWidth:35},5:{cellWidth:25},6:{cellWidth:25},7:{cellWidth:20},8:{cellWidth:25},9:{cellWidth:20},10:{cellWidth:20},11:{cellWidth:25},12:{cellWidth:25},13:{cellWidth:30},14:{cellWidth:25},15:{cellWidth:25},16:{cellWidth:30},17:{cellWidth:30},18:{cellWidth:30},19:{cellWidth:30},20:{cellWidth:30},21:{cellWidth:30},22:{cellWidth:30},23:{cellWidth:30}},startY:20,pageBreak:"auto"}),e.save("exported_order.pdf")}catch(a){console.error("Error generating PDF:",a),h.oR.error("Error generating PDF",{autoClose:1e3})}else if("csv"===e){const e="exported_order.csv",a=j.Wp.json_to_sheet(s);j.Wp.sheet_add_aoa(a,[l],{origin:"A1"});const t=j.Wp.sheet_to_csv(a),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),o=URL.createObjectURL(r);n.setAttribute("href",o),n.setAttribute("download",e),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}G(""),Y(""),V(""),Q(!1)}else s?h.oR.error(s.message,{autoClose:1e3}):h.oR.error("Unknown error occurred",{autoClose:1e3})}catch(ge){console.error("Error exporting data:",ge),h.oR.error("Error exporting data",{autoClose:1e3})}finally{de(!1)}};return(0,S.jsxs)("div",{children:[he?(0,S.jsx)(A.A,{}):(0,S.jsx)(S.Fragment,{children:ie?(0,S.jsx)(w.A,{}):$?(0,S.jsxs)(l.A,{fluid:!0,className:"mt-3 ",children:[(0,S.jsxs)(r.A,{className:"boxShadow p-4 mb-4 mt-4 justify-content-between align-items-center",children:[(0,S.jsx)(r.A,{className:"p-2 mb-2 mt-2 align-items-center justify-content-between",children:(0,S.jsx)(n.A,{xs:"12",md:"auto",children:(0,S.jsx)("h4",{className:"fw-bold text-center text-md-start",children:"Order Reports"})})}),ae&&(0,S.jsxs)(n.A,{xs:"12",md:"auto",className:"d-flex flex-column flex-md-row justify-content-end align-items-center",children:[(0,S.jsxs)(o.A.Group,{controlId:"startDate",className:"me-md-2 mb-3 mb-md-0 w-100 w-md-auto",children:[(0,S.jsx)(o.A.Label,{children:"Start Date:"}),(0,S.jsx)(o.A.Control,{type:"date",value:B,onChange:e=>{const a=e.target.value;q&&a>=q?h.oR.warning("Start date must be earlier than the end date.",{autoClose:2e3}):(G(a),V(""))},disabled:K})]}),(0,S.jsxs)(o.A.Group,{controlId:"endDate",className:"me-md-2 mb-3 mb-md-0 w-100 w-md-auto",children:[(0,S.jsx)(o.A.Label,{children:"End Date:"}),(0,S.jsx)(o.A.Control,{type:"date",value:q,onChange:e=>{const a=e.target.value;B&&a<B?h.oR.warning("End date must be later than the start date.",{autoClose:2e3}):(Y(a),V(""))},disabled:K})]}),(0,S.jsxs)(o.A.Group,{controlId:"period",className:"me-md-2 mb-3 mb-md-0 w-100 w-md-auto",children:[(0,S.jsx)(o.A.Label,{children:"Period:"}),(0,S.jsxs)(o.A.Select,{value:K,onChange:e=>{V(e.target.value),G(""),Y("")},disabled:B||q,children:[(0,S.jsx)("option",{value:"",children:"Select Period"}),(0,S.jsx)("option",{value:"lastWeek",children:"Last Week"}),(0,S.jsx)("option",{value:"lastMonth",children:"Last Month"}),(0,S.jsx)("option",{value:"lastYear",children:"Last Year"})]})]}),(0,S.jsxs)(d.A,{variant:"success",onClick:()=>Q(!0),className:"align-self-end mx-md-2 w-100 w-md-auto",children:["Download ",(0,S.jsx)(p.mCe,{size:25})]})]})]}),(0,S.jsxs)(r.A,{className:"boxShadow p-3 mb-4 d-flex flex-lg-row flex-column flex-xxl-row flex-xl-row flex-sm-column flex-md-row",children:[(0,S.jsx)(n.A,{className:"my-4 mx-2",xxl:3,xl:3,lg:3,sm:6,md:6,children:(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsx)("span",{className:"input-group-text",children:(0,S.jsx)(x.YQq,{})}),(0,S.jsx)("input",{type:"text",placeholder:"Search Orders...",className:"form-control",value:R,onChange:e=>M(e.target.value),onKeyPress:e=>{"Enter"===e.key&&fe()}}),R&&(0,S.jsx)("span",{className:"input-group-text",onClick:()=>{M(""),F("")},children:(0,S.jsx)(x.IeJ,{})})]})}),(0,S.jsx)(n.A,{className:"d-flex flex-column text-center my-4",xxl:2,xl:2,lg:2,sm:3,md:3,children:(0,S.jsx)(d.A,{style:{backgroundColor:e,border:"none"},onClick:fe,disabled:z||""===R,children:z?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(i.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Searching..."]}):"Search"})}),ae?(0,S.jsxs)(n.A,{className:"d-flex flex-column my-4",xxl:3,xl:3,lg:3,sm:6,md:6,children:[" ",(0,S.jsx)(y.Ay,{placeholder:"All",options:se.map((e=>({value:e,label:e}))),value:"All"===re?null:{value:re,label:re},onChange:e=>ne(e?e.value:"All")})]}):(0,S.jsx)(S.Fragment,{})]}),(0,S.jsx)(r.A,{className:"boxShadow p-4 mb-4",children:(0,S.jsx)(u.A,{COLUMNS:Ce,MOCK_DATA:a,currentPage:P,startIndex:W,endIndex:T,setCurrentPage:k,totalItems:D,totalPages:_})})]}):(0,S.jsx)(b.A,{})}),(0,S.jsxs)(c.A,{show:J,onHide:()=>Q(!1),centered:!0,children:[(0,S.jsx)(c.A.Header,{closeButton:!0,children:(0,S.jsx)(c.A.Title,{children:"Export Data"})}),(0,S.jsxs)(c.A.Body,{children:[(0,S.jsx)(d.A,{variant:"primary",className:"m-2",onClick:()=>Ne("pdf"),disabled:oe,children:oe?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(i.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Exporting PDF..."]}):"Export as PDF"}),(0,S.jsx)(d.A,{variant:"success",className:"m-2",onClick:()=>Ne("xlsx"),disabled:oe,children:oe?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(i.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Exporting Excel..."]}):"Export as Excel"}),(0,S.jsx)(d.A,{variant:"warning",className:"m-2",onClick:()=>Ne("csv"),disabled:oe,children:oe?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(i.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Exporting CSV..."]}):"Export as CSV"})]})]})]})}},2364:(e,a,t)=>{t.d(a,{Ay:()=>o});var s=t(9817),l=t(58168),r=t(65043),n=t(61404),o=(t(35513),t(97950),t(11322),(0,r.forwardRef)((function(e,a){var t=(0,s.u)(e);return r.createElement(n.S,(0,l.A)({ref:a},t))})))},39585:()=>{}}]);
//# sourceMappingURL=9056.63a50c25.chunk.js.map